<!-- macros.html -->

{% macro book_modal(modal_id, modal_title, show_add_to_cart, item, id, form_id) %}

<div class="modal fade" id="{{id}}" tabindex="-1" aria-labelledby="bookingModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="{{id}}Label"></h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            </button>
          </div>
          <div class="modal-body">

                <form method="post"  id="{{form_id}}">
                <h1>{{modal_title}}</h1>
                
                {% if not show_add_to_cart  %}

                <label for="borrower_name">Your Name:</label>
                <input type="text" id="borrower_name" name="borrower_name" required><br>
                <label for="borrower_email">Your Email:</label>

                <input type="email" id="borrower_email" name="borrower_email" required><br>

                <label for="borrower_phone">Your Phone</label>
                <input type="tel" id="borrower_phone" name="borrower_phone" required><br>

                {% endif %}

                {% if modal_id != '3'  %}

                <label for="borrow_date">Borrow Date:</label>
                <input type="date" id="borrow_date_{{modal_id}}" name="borrow_date" class="datepicker_borrow" required><br>

                <label for="return_date">Return Date:</label>
                <input type="text" id="return_date_{{modal_id}}" name="return_date" class="datepicker" required><br>
                
                {% endif %}
                
                <!-- Flask logic works with these 3 objects' data and structures -->
                <input type="hidden" name="itemsJSON"     id="itemsJSON"    value="">
                <input type="hidden" name="booked_dates"  id="booked_dates" value="">
                <input type="hidden" name="action"        id="formAction" value="">

                {% if (show_add_to_cart  or  modal_id == '1') %}
                <button type="button" class="booking" onclick="submitForm('add_to_cart', this.form)" class="btn btn-secondary">Add to Cart</button>
                {% endif %}

                {% if not show_add_to_cart%}
                <button type="button" class="booking" onclick="submitForm('book', this.form)" class="btn btn-primary">Book Item(s)</button>
                {% endif %}
                
            </form>

          </div>
        </div>
      </div>
    </div>
{% endmacro %}

{% macro deny_modal(modal_id, modal_title, id, form_id, booking_id) %}

<div class="modal fade" id="{{id}}" tabindex="-1" aria-labelledby="bookingModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="{{id}}Label"></h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            </button>
          </div>
          <div class="modal-body">

                <form action="" method="post"  id="{{form_id}}">
                <h1>{{modal_title}}</h1>
                <input type="hidden" name="formAction" id="formAction" value="">

                <label for="note">Note:</label>
                <textarea name="note" id="note" cols="40" rows="5"></textarea>

                <button type="button" class="booking" onclick="denyBooking('deny', this.form, {{booking_id}})" class="btn btn-primary">Send notification</button>
                <button type="button" class="booking" onclick="denyBooking('deny_no_note', this.form, {{booking_id}})" class="btn btn-primary">Remove without notification</button>
                
            </form>

          </div>
        </div>
      </div>
    </div>

{% endmacro %}

{% macro footer() %}
<footer class="bg-light text-muted text-center mt-5 py-3 border-top">
  <div class="container">
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-center text-center text-md-start">
      <div class="mb-2 mb-md-0 d-flex align-items-center gap-2">
        <img src="{{ url_for('custom_static', filename='images/misc_logo_alpha.png') }}" alt="MISC Logo" style="height: 30px;">
        <span class="ms-2">&copy; {{ current_year or 2025 }} MISC booking. v2.1</span>
      </div>
      <ul class="list-inline mb-0 text-center text-md-start">
        <li class="list-inline-item"><a href="{{ url_for('about') }}">About</a></li>
        <li class="list-inline-item"><a href="{{ url_for('policy') }}">Terms</a></li>
        <li class="list-inline-item"><a href="mailto:admin@misc.org">misc@lmta.lt</a></li>
        <li class="list-inline-item"></li>
      </ul>
    </div>
  </div>
</footer>
{% endmacro %}



